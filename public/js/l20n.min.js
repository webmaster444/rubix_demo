!function(t,e){function r(t,e){r.modules[t]=e}function n(t){for(var e=t.split("/"),r=[],n=0;n<e.length;n++)"."==e[n]||(".."==e[n]?r.pop():r.push(e[n]));return r.join("/")}function o(t,e){return t?t.trim().replace(/\/*$/,"/")+e.trim():e.trim()}function i(t){return t?t.split("/").slice(0,-1).join("/"):null}function a(t,s){if((s=n(o(i(t),s)))in r.exports)return r.exports[s];if(!(s in r.modules))throw new Error("Module not defined: "+s);var u=r.modules[s];if("function"==typeof u){var c={},f=u(a.bind(null,s),c,{id:s,uri:""});u=f!==e?f:c}return r.exports[s]=u}r.modules={},r.exports={};var s=a.bind(null,null);r("l20n",function(t,e){"use strict";var r=t("./l20n/context").Context,n=t("./l20n/parser").Parser,o=t("./l20n/compiler").Compiler;e.Context=r,e.Parser=n,e.Compiler=o,e.getContext=function(t){return new r(t)}}),r("l20n/context",function(t,r){"use strict";function n(t,r){function o(t,o,c){function f(t,n){if(t)return o(t);n!==e&&(s.source=n),s.ast=r.parse(s.source),l()}function l(){function e(t){if(t)return o(t);0===--a&&h()}s.ast.body.filter(function(t,e){return"ImportStatement"===t.type&&(u.push(e),!0)}).forEach(function(t){var e=new n(i(t.uri.content),r);s.resources.push(e)});var a=s.resources.length;if(0===a)return o();s.resources.forEach(function(r){r.build(t+1,e,c)})}function h(){for(var t=s.resources.length-1;t>=0;t--){var e=u[t]||0;Array.prototype.splice.apply(s.ast.body,[e,1].concat(s.resources[t].ast.body))}o()}return t>=7?o(new a("Too many nested imports.")):s.source?setTimeout(function(){f()}):void p.load(s.id,f,c)}function i(t){return null===s.id||c.test(t)?t:s.id.split("/").slice(0,-1).concat(t.split("/")).filter(function(t){return"."!==t}).join("/")}var s=this;this.id=t,this.resources=[],this.source=null,this.ast={type:"LOL",body:[]},this.build=o;var u=[],c=/^\/|:/}function o(t,r,n,o){function i(t){function e(t){t&&(f++,o.emit(t instanceof a?"error":"warning",t)),0===--u&&(f===c.resources.length&&o.emit("error",new a("Locale has no valid resources")),r())}function r(){c.ast.body=c.resources.reduce(function(t,e){return t.concat(e.ast.body)},c.ast.body),i()}function i(){c.entries=n.compile(c.ast),c.isReady=!0,t&&t()}if(!t)var s=!0;var u=c.resources.length;if(0===u)throw new a("Locale has no resources");var f=0;c.resources.forEach(function(t){t.build(0,e,s)})}function s(t){return this.entries.hasOwnProperty(t)?this.entries[t]:e}function u(t){return this.resources.some(function(e){return e.id===t})}this.id=t,this.resources=[],this.entries=null,this.ast={type:"LOL",body:[]},this.isReady=!1,this.build=i,this.getEntry=s,this.hasResource=u;var c=this}function i(r){function i(t,r){Object.keys(r).forEach(function(n){r[n]===e?delete t[n]:"object"!=typeof r[n]?t[n]=r[n]:("object"!=typeof t[n]&&(t[n]={}),i(t[n],r[n]))})}function p(t){if(!t||"object"!=typeof t)throw new a("Context data must be a non-null object");i(U,t)}function d(t,e){if(!V)throw new a("Context not ready");return m.call(F,0,t,e).value}function y(t,e){if(!V)throw new a("Context not ready");return m.call(F,0,t,e)}function v(t,e){if(!e)throw new a("No callback passed");return g.call(F,t,e)}function w(t){V&&setTimeout(t),I("ready",t)}function g(t,e,r){var n={extend:function(r){for(var n=0;n<r.length;n++)-1===t.indexOf(r[n])&&t.push(r[n]);if(V){var o=b.call(this,r);return $.bindGet({id:e,callback:g.bind(this,t,e),globals:Object.keys(o.globalsUsed)},!0),o}}.bind(this),stop:function(){$.unbindGet(e)}.bind(this)};if(!V)return $.bindGet({id:e,callback:g.bind(this,t,e),globals:[]}),n;var o=b.call(this,t),i={entities:o.entities,reason:r||{locales:N.slice()},stop:function(){$.unbindGet(e)}};return $.bindGet({id:e,callback:g.bind(this,t,e),globals:Object.keys(o.globalsUsed)}),e(i),n}function b(t){for(var e,r={entities:{},globalsUsed:{}},n=0;e=t[n];n++){r.entities[e]=y.call(this,e);for(var o in r.entities[e].globals)r.entities[e].globals.hasOwnProperty(o)&&(r.globalsUsed[o]=!0)}return r}function m(t,r,n,o){var i=N[t];if(!i)return R(new s("Unable to get translation",r,N)),{value:o?o.source:r,attributes:{},globals:{},locale:o?o.loc:null};var a=L(i);a.isReady||a.build(null);var c=a.getEntry(r);if(c===e)return S(new u("Not found",r,N,a)),m.call(this,t+1,r,n,o);var f;try{f=c.get(x.call(this,n))}catch(e){if(e instanceof l.RuntimeError){if(R(new u(e.message,r,N,a)),e instanceof l.ValueError){var h=o||{source:e.source,loc:a.id};return m.call(this,t+1,r,n,h)}return m.call(this,t+1,r,n,o)}throw R(e)}return f.locale=a.id,f}function x(t){if(!t)return U;var e={};return i(e,U),i(e,t),e}function E(t){if(W)throw new a("Context is frozen");D.push(["text",t])}function A(t,e){var r=new n(null,J);r.source=t,e.resources.push(r)}function _(t){if(W)throw new a("Context is frozen");D.push(["function"==typeof t?"template":"uri",t])}function k(t,e){if(!e.hasResource(t)){var r=new n(t,J);e.resources.push(r)}}function C(t,r){if(W)throw new a("Context is frozen");t!==e&&(Z=t,B=[],r||(r=[]),r.push(t),r.forEach(function(t){if("string"!=typeof t)throw new a("Language codes must be strings");-1===B.indexOf(t)&&B.push(t)}))}function O(t){if(W)throw new a("Context is frozen");G=t}function L(t){if(H[t])return H[t];var e=new o(t,J,Y,q);H[t]=e;for(var r=0;r<D.length;r++){var n=D[r];"text"===n[0]?A(n[1],e):"uri"===n[0]?k(n[1],e):k(n[1](e.id),e)}return e}function z(){if(W&&!V)throw new a("Context not ready");if(0!==D.length){if(W=!0,(M=Array.prototype.slice.call(arguments)).length&&M.forEach(function(t){if("string"!=typeof t)throw new a("Language codes must be strings")}),!G){var e=t("./intl").Intl;G=e.prioritizeLocales}var r=G(B,M,Z,j);r&&j(r)}else S(new a("Context has no resources; not freezing"))}function j(t){var e=L((N=t)[0]);e.isReady?T():e.build(T)}function T(){V=!0,$.all(N.slice()),q.emit("ready")}function I(t,e){q.addEventListener(t,e)}function P(t,e){q.removeEventListener(t,e)}function S(t){return q.emit("warning",t),t}function R(t){return q.emit("error",t),t}this.id=r,this.registerLocales=C,this.registerLocaleNegotiator=O,this.requestLocales=z,this.addResource=E,this.linkResource=_,this.updateData=p,this.getSync=d,this.getEntitySync=y,this.localize=v,this.ready=w,this.addEventListener=I,this.removeEventListener=P,Object.defineProperty(this,"supportedLocales",{get:function(){return N.slice()},enumerable:!0});var G,U={},Z="i-default",B=[Z],M=[],N=[],H={},D=[],V=!1,W=!1,q=new c,J=new f,Y=new l,$=new h,F=this;J.addEventListener("error",R),Y.addEventListener("error",S),Y.setGlobals($.globals)}function a(t){this.name="ContextError",this.message=t}function s(t,e,r){a.call(this,t),this.name="RuntimeError",this.entity=e,this.supportedLocales=r.slice(),this.message=e+": "+t+"; tried "+r.join(", ")}function u(t,e,r,n){s.call(this,t,e,r),this.name="TranslationError",this.locale=n.id,this.message="["+this.locale+"] "+e+": "+t}var c=t("./events").EventEmitter,f=t("./parser").Parser,l=t("./compiler").Compiler,h=t("./retranslation").RetranslationManager;t("./platform/globals");var p=t("./platform/io");i.Error=a,i.RuntimeError=s,i.TranslationError=u,a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,s.prototype=Object.create(a.prototype),s.prototype.constructor=s,u.prototype=Object.create(s.prototype),u.prototype.constructor=u,r.Context=i}),r("l20n/events",function(t,e){"use strict";function r(){this._listeners={}}r.prototype.emit=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(!this._listeners[e])return!1;for(var r=this._listeners[e].slice(),n=0;n<r.length;n++)r[n].apply(this,t);return!0},r.prototype.addEventListener=function(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this},r.prototype.removeEventListener=function(t,e){var r=this._listeners[t],n=r.indexOf(e);return-1===n?this:(r.splice(n,1),this)},e.EventEmitter=r}),r("l20n/parser",function(t,r){"use strict";function n(t){function r(){var t=$+=2,e=Y.indexOf("*/",t);if(-1===e)throw q("Comment without closing tag");return $=e+2,{type:"Comment",content:Y.slice(t,e)}}function n(){for(var t,e,r=[];;){if(t=s("Attribute"),t.local="_"===t.key.name.charAt(0),r.push(t),e=p(),">"===Y.charAt($))break;if(!e)throw q('Expected ">"')}return r}function a(t){var e=v();if(d(),":"!==Y.charAt($))throw q('Expected ":"');return++$,d(),{type:t,key:e,value:h()}}function s(t){var e=v(),r=[];if("["===Y.charAt($)&&(++$,d(),r=W(C,"]")),d(),":"!==Y.charAt($))throw q('Expected ":"');return++$,d(),{type:t,key:e,value:h(),index:r}}function u(){++$,d();for(var t,e,r,n=[],o=!1;;){if(t=!1,"*"===Y.charAt($)){if(++$,o)throw q("Default item redefinition forbidden");t=!0,o=!0}if(e=a("HashItem"),e.default=t,n.push(e),d(),(r=","===Y.charAt($))&&(++$,d()),"}"===Y.charAt($)){++$;break}if(!r)throw q('Expected "}"')}return{type:"Hash",content:n}}function c(){var t,e=Y.charAt(++$);if("u"===e){for(var r="",n=0;n<4;n++){if(e=Y[++$],!((t=e.charCodeAt(0))>96&&t<103||t>64&&t<71||t>47&&t<58))throw q("Illegal unicode escape sequence");r+=e}return String.fromCharCode(parseInt(r,16))}return e}function f(t,e){var r,n=null,o="",i=0,a=($+=e-1)+1;t:for(;;)switch(r=Y.charAt(++$)){case"\\":o+=c();break;case"{":if("{"===Y.charAt($+1)){if(null===n&&(n=[]),i>Q-1)throw q("Too many placeables, maximum allowed is "+Q);if(o&&n.push({type:"String",content:o}),$+=2,d(),n.push(C()),d(),"}"!==Y.charAt($)||"}"!==Y.charAt($+1))throw q('Expected "}}"');$+=1,i++,o="";break}default:if(1===e){if(r===t){$++;break t}}else if(r===t[0]&&Y.charAt($+1)===r&&Y.charAt($+2)===r){$+=3;break t}if(o+=r,$+1>=F)throw q("Unclosed string literal")}return null===n?{type:"String",content:o}:(o.length&&n.push({type:"String",content:o}),{type:"ComplexString",content:n,source:Y.slice(a,$-e)})}function l(t,e){var r,n=Y.indexOf(t,$+e);if(-1===n)throw q("Unclosed string literal");return r=Y.slice($+e,n),-1!==r.indexOf("{{")?f(t,e):-1!==r.indexOf("\\")?f(t,e):($=n+e,{type:"String",content:r})}function h(t,r){if(r===e&&(r=Y.charAt($)),"'"===r||'"'===r)return r===Y.charAt($+1)&&r===Y.charAt($+2)?l(r+r+r,3):l(r,1);if("{"===r)return u();if(!t)throw q("Unknown value type");return null}function p(){for(var t=$,e=Y.charCodeAt(t);32===e||10===e||9===e||13===e;)e=Y.charCodeAt(++$);return $!==t}function d(){for(var t=Y.charCodeAt($);32===t||10===t||9===t||13===t;)t=Y.charCodeAt(++$)}function y(){return++$,{type:"VariableExpression",id:v()}}function v(){var t=$,e=t,r=Y,n=r.charCodeAt(e);if((n<97||n>122)&&(n<65||n>90)&&95!==n)throw q("Identifier has to start with [a-zA-Z_]");for(n=r.charCodeAt(++t);n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57||95===n;)n=r.charCodeAt(++t);return $=t,{type:"Identifier",name:r.slice(e,t)}}function w(){if($+=6,"("!==Y.charAt($))throw q('Expected "("');++$,d();var t=l(Y.charAt($),1);if(d(),")"!==Y.charAt($))throw q('Expected ")"');return++$,{type:"ImportStatement",uri:t}}function g(t){if("_"===t.name.charAt(0))throw q('Macro ID cannot start with "_"');++$;var e=W(y,")");if(p(),"{"!==Y.charAt($))throw q('Expected "{"');++$,d();var r=C();if(d(),"}"!==Y.charAt($))throw q('Expected "}"');if(++$,d(),62!==Y.charCodeAt($))throw q('Expected ">"');return++$,{type:"Macro",id:t,args:e,expression:r}}function b(t,e){if(!p())throw q("Expected white space");var r=Y.charAt($),o=h(!0,r),i=null;if(null===o){if(">"===r)throw q('Expected ">"');i=n()}else{var a=p();if(">"!==Y.charAt($)){if(!a)throw q('Expected ">"');i=n()}}return++$,{type:"Entity",id:t,value:o,index:e,attrs:i,local:95===t.name.charCodeAt(0)}}function m(){var t=Y.charCodeAt($);if(60===t){++$;var e=v();return t=Y.charCodeAt($),40===t?g(e):91===t?(++$,b(e,W(C,"]"))):b(e,null)}if(47===Y.charCodeAt($)&&42===Y.charCodeAt($+1))return r();if("import"===Y.slice($,$+6))return w();throw q("Invalid entry")}function x(){var t=[];for(d();$<F;){try{t.push(m())}catch(e){if(!(e instanceof o))throw e;X.emit("error",e),t.push(J())}$<F&&d()}return{type:"LOL",body:t}}function E(){var t=[];for(d();$<F;)t.push(m()),$<F&&d();return{type:"LOL",body:t}}function A(t){return Y=t,$=0,F=Y.length,K()}function _(t,e){if(!X)throw new Error("Emitter not available");return X.addEventListener(t,e)}function k(t,e){if(!X)throw new Error("Emitter not available");return X.removeEventListener(t,e)}function C(){return z()}function O(t,e,r,n){for(var o,i,a=n();;){if(o="",d(),i=Y.charAt($),-1===t[0].indexOf(i))break;if(o+=i,++$,t.length>1)if(i=Y.charAt($),t[1]===i)++$,o+=i;else if(t[2])return--$,a;d(),a={type:e,operator:{type:r,token:o},left:a,right:n()}}return a}function L(t,e,r,n){var o=Y.charCodeAt($);return-1===t.indexOf(o)?n():(++$,d(),{type:e,operator:{type:r,token:String.fromCharCode(o)},argument:L(t,e,r,n)})}function z(){var t=j();if(d(),63!==Y.charCodeAt($))return t;++$,d();var e=C();if(d(),58!==Y.charCodeAt($))throw q('Expected ":"');return++$,d(),{type:"ConditionalExpression",test:t,consequent:e,alternate:C()}}function j(){return O([["|"],"|",!0],"LogicalExpression","LogicalOperator",T)}function T(){return O([["&"],"&",!0],"LogicalExpression","Logicalperator",I)}function I(){return O([["=","!"],"=",!0],"BinaryExpression","BinaryOperator",P)}function P(){return O([["<",">"],"=",!1],"BinaryExpression","BinaryOperator",S)}function S(){return O([["+","-"]],"BinaryExpression","BinaryOperator",R)}function R(){return O([["%"]],"BinaryExpression","BinaryOperator",G)}function G(){return O([["*"]],"BinaryExpression","BinaryOperator",U)}function U(){return O([["/"]],"BinaryExpression","BinaryOperator",Z)}function Z(){return L([43,45,33],"UnaryExpression","UnaryOperator",H)}function B(t){return d(),{type:"CallExpression",callee:t,arguments:W(C,")")}}function M(t,e){if("ParenthesisExpression"!==t.type&&"Identifier"!==t.type&&"ThisExpression"!==t.type)throw q("AttributeExpression must have Identifier, This or Parenthesis as left node");var r;if(e){if(d(),r=C(),d(),"]"!==Y.charAt($))throw q('Expected "]"');return++$,{type:"AttributeExpression",expression:t,attribute:r,computed:!0}}return r=v(),{type:"AttributeExpression",expression:t,attribute:r,computed:!1}}function N(t,e){var r;if(e){if(d(),r=C(),d(),"]"!==Y.charAt($))throw q('Expected "]"');return++$,{type:"PropertyExpression",expression:t,property:r,computed:!0}}return r=v(),{type:"PropertyExpression",expression:t,property:r,computed:!1}}function H(){for(var t,e=D();;)if(46===(t=Y.charCodeAt($))||91===t)++$,e=N(e,91===t);else if(58===t&&58===Y.charCodeAt($+1))$+=2,91===Y.charCodeAt($)?(++$,e=M(e,!0)):e=M(e,!1);else{if(40!==t)break;++$,e=B(e)}return e}function D(){if(40===Y.charCodeAt($)){++$,d();var t={type:"ParenthesisExpression",expression:C()};if(d(),41!==Y.charCodeAt($))throw q('Expected ")"');return++$,t}return V()}function V(){for(var t=$,e=Y.charCodeAt(t);e>47&&e<58;)e=Y.charCodeAt(++t);if(t>$){var r=$;return $=t,{type:"Number",value:parseInt(Y.slice(r,t),10)}}switch(e){case 39:case 34:case 123:case 91:return h();case 36:return y();case 64:return++$,{type:"GlobalsExpression",id:v()};case 126:return++$,{type:"ThisExpression"};default:return v()}}function W(t,e){var r;if(d(),Y.charAt($)===e)return++$,[];for(var n=[];;){if(n.push(t()),d(),","!==(r=Y.charAt($))){if(r===e){++$;break}throw q('Expected "," or "'+e+'"')}++$,d()}return n}function q(t,r){r===e&&(r=$);var n=Y.lastIndexOf("<",r-1),i=Y.lastIndexOf(">",r-1);n=i>n?i+1:n;var a=Y.slice(n,r+10);return new o(t+" at pos "+r+': "'+a+'"',r,a)}function J(){var t,e=Y.indexOf("<",$);return-1===e?(t={type:"JunkEntry",content:Y.slice($)},$=F,t):(t={type:"JunkEntry",content:Y.slice($,e)},$=e,t)}this.parse=A,this.addEventListener=_,this.removeEventListener=k;var Y,$,F,X,K,Q=100;t?K=E:(X=new i,K=x)}function o(t,e,r){this.name="ParserError",this.message=t,this.pos=e,this.context=r}var i=t("./events").EventEmitter;n.Error=o,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,r.Parser=n}),r("l20n/compiler",function(t,r){function n(){function t(t,e){e||(e={});for(var r,n=0;r=t.body[n];n++){var o=H[r.type];if(o)try{e[r.id.name]=new o(r,e)}catch(t){c(t)}}return e}function r(t){return M=t,!0}function n(t,e){return B.addEventListener(t,e)}function o(t,e){return B.removeEventListener(t,e)}function l(t,e,r,n){var o=new t(e,r,n);return B.emit("error",o),o}function h(t,e){this.id=t.id.name,this.env=e,this.local=t.local||!1,this.index=null,this.attributes=null,this.publicAttributes=null;var r;if(t.index)for(this.index=[],r=0;r<t.index.length;r++)this.index.push(k(t.index[r],this));if(t.attrs)for(this.attributes={},this.publicAttributes=[],r=0;r<t.attrs.length;r++){var n=t.attrs[r];this.attributes[n.key.name]=new p(n,this),n.local||this.publicAttributes.push(n.key.name)}t.value&&"String"===t.value.type?this.value=t.value.content:this.value=v(t.value,this,this.index)}function p(t,e){if(this.key=t.key.name,this.local=t.local||!1,this.index=null,t.index){this.index=[];for(var r=0;r<t.index.length;r++)this.index.push(k(t.index[r],this))}t.value&&"String"===t.value.type?this.value=t.value.content:this.value=v(t.value,e,this.index),this.entity=e}function d(t,e){this.id=t.id.name,this.env=e,this.local=t.local||!1,this.expression=v(t.expression,this),this.args=t.args}function y(t,e,r){if(!t)return null;if(!D[t.type])throw l("CompilationError","Unknown expression type"+t.type);return r&&(r=r.slice()),D[t.type](t,e,r)}function v(t,e,r){if(!t)return null;var n;return function(o,i,a){return n||(n=y(t,e,r)),n(o,i,a)}}function w(t,r,n){if("string"==typeof t||"boolean"==typeof t||"number"==typeof t||!t)return t;if(t.value!==e)return w(t.value,r,n);if("function"==typeof t){var o=t(r,n);return r=o[0],o=o[1],w(o,r,n)}if(t.expression)throw new a("Uncalled macro: "+t.id);throw new a("Cannot resolve ctxdata or global of type "+typeof t)}function g(t){var e=t.name;return function(t){if(!t.__env__.hasOwnProperty(e))throw new a("Reference to an unknown entry: "+e);return t={__this__:t.__env__[e],__env__:t.__env__},[t,t.__this__]}}function b(){return function(t){return[t,t.__this__]}}function m(t){var e=t.id.name;return function(t,r){if(t.hasOwnProperty(e))return t[e];if(!r||!r.hasOwnProperty(e))throw new a("Reference to an unknown variable: "+e);return[t,r[e]]}}function x(t){var e=t.id.name;return function(t){if(!M)throw new a("No globals set (tried @"+e+")");if(!M.hasOwnProperty(e))throw new a("Reference to an unknown global: "+e);var r;try{r=M[e].get()}catch(t){throw new a("Cannot evaluate global "+e)}return N.globals[e]=!0,[t,r]}}function E(t){return function(e){return[e,t.value]}}function A(t){return function(r,n,o){if(o!==e)throw new a("Cannot get property of a string: "+o);return[r,t.content]}}function _(t,r){for(var n=[],o=0;o<t.content.length;o++)n.push(y(t.content[o],r));return function(){var o=!1;return function(i,u,f){if(f!==e)throw new a("Cannot get property of a string: "+f);if(o)throw new a("Cyclic reference detected");o=!0;var l=[];try{for(var h=0;h<n.length;h++){var p=w(n[h],i,u);if("string"!=typeof p&&"number"!=typeof p)throw new a("Placeables must be strings or numbers");if(p.length>Z)throw new a("Placeable has too many characters, maximum allowed is "+Z);l.push(p)}}catch(e){throw c(e),new s(e.message,r,t.source)}finally{o=!1}return[i,l.join("")]}}()}function k(t,e){var r=y(t,e);return function(){var t=!1;return function(n,o){if(t)throw new a("Cyclic reference detected");t=!0;var i;try{i=w(r,n,o)}catch(t){if(t instanceof u)throw t;throw c(t),l(u,t.message,e)}finally{t=!1}return[n,i]}}()}function C(t,r,n){for(var o,i={},a=n?n.shift():e,s=0;s<t.content.length;s++){var c=t.content[s];i[c.key.name]=y(c.value,r,n),c.default&&(o=c.key.name)}return function(t,n,s){for(var c=[s,a,o],f=[],h=0;h<c.length;h++){var p=w(c[h],t,n);if(p!==e){if("string"!=typeof p)throw l(u,"Index must be a string",r);if(f.push(p),i.hasOwnProperty(p))return[t,i[p]]}}var d;throw d=f.length?'Hash key lookup failed (tried "'+f.join('", "')+'").':"Hash key lookup failed.",l(u,d,r)}}function O(t,e){if("-"===t)return function(t){if("number"!=typeof t)throw new a("The unary - operator takes a number");return-t};if("+"===t)return function(t){if("number"!=typeof t)throw new a("The unary + operator takes a number");return+t};if("!"===t)return function(t){if("boolean"!=typeof t)throw new a("The ! operator takes a boolean");return!t};throw l(i,"Unknown token: "+t,e)}function L(t,e){if("=="===t)return function(t,e){if(!("number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e))throw new a("The == operator takes two numbers or two strings");return t===e};if("!="===t)return function(t,e){if(!("number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e))throw new a("The != operator takes two numbers or two strings");return t!==e};if("<"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The < operator takes two numbers");return t<e};if("<="===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The <= operator takes two numbers");return t<=e};if(">"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The > operator takes two numbers");return t>e};if(">="===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The >= operator takes two numbers");return t>=e};if("+"===t)return function(t,e){if(!("number"==typeof t&&"number"==typeof e||"string"==typeof t&&"string"==typeof e))throw new a("The + operator takes two numbers or two strings");return t+e};if("-"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The - operator takes two numbers");return t-e};if("*"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The * operator takes two numbers");return t*e};if("/"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The / operator takes two numbers");if(0===e)throw new a("Division by zero not allowed.");return t/e};if("%"===t)return function(t,e){if("number"!=typeof t||"number"!=typeof e)throw new a("The % operator takes two numbers");if(0===e)throw new a("Modulo zero not allowed.");return t%e};throw l(i,"Unknown token: "+t,e)}function z(t,e){if("&&"===t)return function(t,e){if("boolean"!=typeof t||"boolean"!=typeof e)throw new a("The && operator takes two booleans");return t&&e};if("||"===t)return function(t,e){if("boolean"!=typeof t||"boolean"!=typeof e)throw new a("The || operator takes two booleans");return t||e};throw l(i,"Unknown token: "+t,e)}function j(t,e){var r=O(t.operator.token,e),n=y(t.argument,e);return function(t,e){return[t,r(w(n,t,e))]}}function T(t,e){var r=y(t.left,e),n=L(t.operator.token,e),o=y(t.right,e);return function(t,e){return[t,n(w(r,t,e),w(o,t,e))]}}function I(t,e){var r=y(t.left,e),n=z(t.operator.token,e),o=y(t.right,e);return function(t,e){return[t,n(w(r,t,e),w(o,t,e))]}}function P(t,e){var r=y(t.test,e),n=y(t.consequent,e),o=y(t.alternate,e);return function(t,e){var i=w(r,t,e);if("boolean"!=typeof i)throw new a("Conditional expressions must test a boolean");return!0===i?n(t,e):o(t,e)}}function S(t,e){for(var r=y(t.callee,e),n=[],o=0;o<t.arguments.length;o++)n.push(y(t.arguments[o],e));return function(t,e){for(var o=[],i=0;i<n.length;i++)o.push(n[i](t,e));var s=r(t,e);if(t=s[0],!(s=s[1]).expression)throw new a("Expected a macro, got a non-callable.");return s._call(o,e)}}function R(t,r){var n=y(t.expression,r),o=t.computed?y(t.property,r):t.property.name;return function(t,r){var i=w(o,t,r);if("string"!=typeof i)throw new a("Property name must evaluate to a string: "+i);var s=n(t,r);if(t=s[0],(s=s[1])&&s.value!==e){if("function"!=typeof s.value)throw new a("Cannot get property of a "+typeof s.value+": "+i);return s.value(t,r,i)}if("function"==typeof s)return s(t,r,i);if(s&&s.expression)throw new a("Cannot get property of a macro: "+i);if("object"==typeof s){if(null===s)throw new a("Cannot get property of a null: "+i);if(Array.isArray(s))throw new a("Cannot get property of an array: "+i);if(!s.hasOwnProperty(i))throw new a(i+" is not defined on the object.");return[t,s[i]]}throw new a("Cannot get property of a "+typeof s+": "+i)}}function G(t,e){var r=y(t.expression,e),n=t.computed?y(t.attribute,e):t.attribute.name;return function(t,e){var o=w(n,t,e),i=r(t,e);if(t=i[0],!(i=i[1]).attributes)throw new a("Cannot get attribute of a non-entity: "+o);if(!i.attributes.hasOwnProperty(o))throw new a(i.id+" has no attribute "+o);return[t,i.attributes[o]]}}function U(t,e){return y(t.expression,e)}this.compile=t,this.setGlobals=r,this.addEventListener=n,this.removeEventListener=o;var Z=2500,B=new f,M=null,N={globals:{}},H={Entity:h,Macro:d};h.prototype.getString=function(t){try{var e={__this__:this,__env__:this.env};return w(this.value,e,t)}catch(t){throw c(t),t instanceof s&&B.emit("error",t),t}},h.prototype.get=function(t){N.globals={};var e={value:this.getString(t),attributes:{}};if(this.publicAttributes){e.attributes={};for(var r,n=0;r=this.publicAttributes[n];n++)e.attributes[r]=this.attributes[r].getString(t)}return e.globals=N.globals,e},p.prototype.getString=function(t){try{var e={__this__:this.entity,__env__:this.entity.env};return w(this.value,e,t)}catch(t){throw c(t),t instanceof s&&B.emit("error",t),t}},d.prototype._call=function(t,e){var r={__this__:this,__env__:this.env};if(this.args.length!==t.length)throw new a(this.id+"() takes exactly "+this.args.length+" argument(s) ("+t.length+" given)");for(var n=0;n<this.args.length;n++)r[this.args[n].id.name]=t[n];var o=this.expression(r,e);return r=o[0],o=o[1],[r,w(o,r,e)]};var D={Identifier:g,ThisExpression:b,VariableExpression:m,GlobalsExpression:x,Number:E,String:A,Hash:C,HashItem:y,ComplexString:_,UnaryExpression:j,BinaryExpression:T,LogicalExpression:I,ConditionalExpression:P,CallExpression:S,PropertyExpression:R,AttributeExpression:G,ParenthesisExpression:U}}function o(t){this.name="CompilerError",this.message=t}function i(t,e){o.call(this,t),this.name="CompilationError",this.entry=e.id}function a(t){o.call(this,t),this.name="RuntimeError"}function s(t,e,r){a.call(this,t),this.name="ValueError",this.entry=e.id,this.source=r}function u(t,e){a.call(this,t),this.name="IndexError",this.entry=e.id}function c(t){if(!(t instanceof o))throw t}var f=t("./events").EventEmitter;n.Error=o,n.CompilationError=i,n.RuntimeError=a,n.ValueError=s,n.IndexError=u,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,i.prototype=Object.create(o.prototype),i.prototype.constructor=i,a.prototype=Object.create(o.prototype),a.prototype.constructor=a,s.prototype=Object.create(a.prototype),s.prototype.constructor=s,u.prototype=Object.create(a.prototype),u.prototype.constructor=u,r.Compiler=n}),r("l20n/retranslation",function(t,e){"use strict";function r(){function t(t){var e=new t;this.globals[e.id]=e,e.activate&&(a[e.id]=0,e.addEventListener("change",function(t){for(var r=0;r<i.length;r++)i[r]&&-1!==i[r].globals.indexOf(t)&&i[r].callback({global:e.id})}))}function e(t,e){var r,n;for(r=0;r<s.length;r++)if(s[r].id===t.id){n=!0;break}n?e&&(s[r]=t):s.push(t);var o;for(r=0;r<i.length;r++)if(i[r]&&i[r].id===t.id){o=i[r];break}var u;o?e?(o.callback=t.callback,(u=t.globals.filter(function(t){return this.globals[t].activate&&-1===o.globals.indexOf(t)},this)).forEach(function(t){a[t]++,this.globals[t].activate()},this),o.globals=o.globals.concat(u)):0===t.globals.length?delete i[r]:((u=t.globals.filter(function(t){return this.globals[t].activate&&-1===o.globals.indexOf(t)},this)).forEach(function(t){a[t]++,this.globals[t].activate()},this),o.globals.filter(function(e){return this.globals[e].activate&&-1===t.globals.indexOf(e)},this).forEach(function(t){0===--a[t]&&this.globals[t].deactivate()},this),o.globals=t.globals):0!==t.globals.length&&(i.push(t),t.globals.forEach(function(t){this.globals[t].activate&&(a[t]++,this.globals[t].activate())},this))}function n(t){for(var e,r=-1,n=0;n<i.length;n++)if(i[n]&&i[n].id===t){e=i[n],r=n;break}if(e)for(e.globals.forEach(function(t){this.globals[t].activate&&0===--a[t]&&this.globals[t].deactivate()},this),i.splice(r,1),n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}}function o(t){for(var e=0;e<s.length;e++)s[e].callback({locales:t})}var i=[],a={},s=[];this.bindGet=e,this.unbindGet=n,this.all=o,this.globals={},r._constructors.forEach(function(e){t.call(this,e)},this)}r._constructors=[],r.registerGlobal=function(t){r._constructors.push(t)},r.deregisterGlobal=function(t){var e=r._constructors.indexOf(t);-1!==e&&r._constructors.splice(e,1)},e.RetranslationManager=r}),r("l20n/platform/globals",function(e,r){"use strict";function n(){this.id=null,this._emitter=new s,this.value=null,this.isActive=!1}function o(){function e(){return{width:{px:document.body.clientWidth}}}function r(){o.value=e(),o._emitter.emit("change",o.id)}n.call(this),this.id="screen",this._get=e,this.activate=function(){this.isActive||(t.addEventListener("resize",r),this.isActive=!0)},this.deactivate=function(){t.removeEventListener("resize",r),this.value=null,this.isActive=!1};var o=this}function i(){function t(){return/^MacIntel/.test(navigator.platform)?"mac":/^Linux/.test(navigator.platform)?"linux":/^Win/.test(navigator.platform)?"win":"unknown"}n.call(this),this.id="os",this.get=t}function a(){function t(){return(new Date).getHours()}function e(){var t=new Date;t.getHours()!==r.value&&(r.value=t.getHours(),r._emitter.emit("change",r.id))}n.call(this),this.id="hour",this._get=t,this.activate=function(){if(!this.isActive){var t=new Date;i=setTimeout(function(){e(),i=setInterval(e,o)},o-t.getTime()%o),this.isActive=!0}},this.deactivate=function(){clearInterval(i),this.value=null,this.isActive=!1};var r=this,o=36e5,i=null}var s=e("../events").EventEmitter,u=e("../retranslation").RetranslationManager;n.prototype._get=function(){throw new Error("Not implemented")},n.prototype.get=function(){return this.value&&this.isActive||(this.value=this._get()),this.value},n.prototype.addEventListener=function(t,e){if("change"!==t)throw"Unknown event type";this._emitter.addEventListener(t,e)},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,i.prototype=Object.create(n.prototype),i.prototype.constructor=i,a.prototype=Object.create(n.prototype),a.prototype.constructor=a,u.registerGlobal(o),u.registerGlobal(i),u.registerGlobal(a),r.Global=n}),r("l20n/platform/io",function(t,e){"use strict";function r(t){this.name="IOError",this.message=t}e.load=function(t,e,n){var o=new XMLHttpRequest;o.overrideMimeType&&o.overrideMimeType("text/plain"),o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status||0===o.status)e(null,o.responseText);else{var n=new r("Not found: "+t);e(n)}},o.open("GET",t,!n),o.send("")},r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,e.Error=r}),r("l20n/intl",function(t,r,n){"use strict";function o(t){if(!d.test(t))return!1;if(t.startsWith("x-"))return!0;var e=t.indexOf("-x-");return-1!==e&&(t=t.substring(0,e)),!y.test(t)&&!v.test(t)}function i(t){if(t=t.toLowerCase(),l&&l.hasOwnProperty(t))return l[t];for(var e=t.split("-"),r=0;r<e.length;){var n=e[r];if(1===n.length&&(r>0||"x"===n))break;4===n.length?n=n[0].toUpperCase()+n.substring(1):0!==r&&2===n.length&&(n=n.toUpperCase()),h.hasOwnProperty(n)?n=h[n]:p.hasOwnProperty(n)&&(n=p[n].preferred,1===r&&p[n].prefix===e[0]&&(e.shift(),r--)),e[r]=n,r++}for(var o=e.slice(0,r).join("-"),i=[];r<e.length&&"x"!==e[r];){var a=r;for(r++;r<e.length&&e[r].length>1;)r++;var s=sybtags.slice(a,r).join("-");i.push(s)}i.sort();var u="";r<e.length&&(u=e.slice(r).join("-"));var c=o;return i.length>0&&(c+="-"+i.join("-")),u.length>0&&(c.length>0?c+="-"+u:c=u),c}function a(t){if(t===e)return[];var r=[];"string"==typeof t&&(t=[t]);for(var n=t,a=n.length,s=0;s<a;){if(s in n){var u=n[s];"string"!=typeof u&&"object"!=typeof u&&ThrowError(JSMSG_INVALID_LOCALES_ELEMENT);var c=u;o(c)||ThrowError(JSMSG_INVALID_LANGUAGE_TAG,c),c=i(c),-1===r.indexOf(c)&&r.push(c)}s++}return r}function s(t,r){for(var n=r;;){if(-1!==t.indexOf(n))return n;var o=n.lastIndexOf("-");if(-1===o)return e;o>=2&&"-"===n[o-2]&&(o-=2),n=n.substring(0,o)}}function u(t,r){for(var n=r.length,o=[],i=0;i<n;){var a=s(t,r[i].replace(f,""));a!==e&&o.push(a),i++}return o.slice(0)}function c(t,e,r){var n=u(t=a(t),e=a(e));return r?(r=i(r),-1===n.indexOf(r)&&n.push(r),n):n}String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!1,writable:!1,value:function(t,e){return e=e||0,this.indexOf(t,e)===e}});new RegExp("-u(-[a-z0-9]{2,8})+");var f=new RegExp("-u(-[a-z0-9]{2,8})+","g"),l={},h={},p={},d=function(){return new RegExp("^(?:(?:[a-zA-Z]{2,3}(?:-(?:[a-zA-Z]{3}(?:-[a-zA-Z]{3}){0,2}))?|[a-zA-Z]{4}|[a-zA-Z]{5,8})(?:-(?:[a-zA-Z]{4}))?(?:-(?:[a-zA-Z]{2}|[0-9]{3}))?(?:-(?:(?:[a-zA-Z]|[0-9]){5,8}|(?:[0-9](?:[a-zA-Z]|[0-9]){3})))*(?:-(?:(?:[0-9]|[A-WY-Za-wy-z])(?:-(?:[a-zA-Z]|[0-9]){2,8})+))*(?:-(?:x(?:-[a-z0-9]{1,8})+))?|(?:x(?:-[a-z0-9]{1,8})+)|(?:(?:en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(?:art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)))$","i")}(),y=function(){return new RegExp("(?:(?:[a-zA-Z]|[0-9]){2,8}-)+((?:(?:[a-zA-Z]|[0-9]){5,8}|(?:[0-9](?:[a-zA-Z]|[0-9]){3})))-(?:(?:[a-zA-Z]|[0-9]){2,8}-)*\\1(?!(?:[a-zA-Z]|[0-9]))")}(),v=function(){return new RegExp("-((?:[0-9]|[A-WY-Za-wy-z]))-(?:(?:[a-zA-Z]|[0-9])+-)*\\1(?!(?:[a-zA-Z]|[0-9]))")}();r.Intl={prioritizeLocales:c}}),t.L20n=s("l20n")}(window);